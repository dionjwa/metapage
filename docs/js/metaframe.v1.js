// Generated by Haxe 3.4.7
(function ($hx_exports) { "use strict";
function $extend(from, fields) {
	function Inherit() {} Inherit.prototype = from; var proto = new Inherit();
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var EReg = function(r,opt) {
	this.r = new RegExp(r,opt.split("u").join(""));
};
EReg.__name__ = true;
EReg.prototype = {
	match: function(s) {
		if(this.r.global) {
			this.r.lastIndex = 0;
		}
		this.r.m = this.r.exec(s);
		this.r.s = s;
		return this.r.m != null;
	}
	,matched: function(n) {
		if(this.r.m != null && n >= 0 && n < this.r.m.length) {
			return this.r.m[n];
		} else {
			throw new js__$Boot_HaxeError("EReg::matched");
		}
	}
};
var HxOverrides = function() { };
HxOverrides.__name__ = true;
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) {
		return undefined;
	}
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(len == null) {
		len = s.length;
	} else if(len < 0) {
		if(pos == 0) {
			len = s.length + len;
		} else {
			return "";
		}
	}
	return s.substr(pos,len);
};
HxOverrides.remove = function(a,obj) {
	var i = a.indexOf(obj);
	if(i == -1) {
		return false;
	}
	a.splice(i,1);
	return true;
};
HxOverrides.iter = function(a) {
	return { cur : 0, arr : a, hasNext : function() {
		return this.cur < this.arr.length;
	}, next : function() {
		return this.arr[this.cur++];
	}};
};
Math.__name__ = true;
var Reflect = function() { };
Reflect.__name__ = true;
Reflect.fields = function(o) {
	var a = [];
	if(o != null) {
		var hasOwnProperty = Object.prototype.hasOwnProperty;
		for( var f in o ) {
		if(f != "__id__" && f != "hx__closures__" && hasOwnProperty.call(o,f)) {
			a.push(f);
		}
		}
	}
	return a;
};
Reflect.deleteField = function(o,field) {
	if(!Object.prototype.hasOwnProperty.call(o,field)) {
		return false;
	}
	delete(o[field]);
	return true;
};
var Std = function() { };
Std.__name__ = true;
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
Std.parseInt = function(x) {
	var v = parseInt(x,10);
	if(v == 0 && (HxOverrides.cca(x,1) == 120 || HxOverrides.cca(x,1) == 88)) {
		v = parseInt(x);
	}
	if(isNaN(v)) {
		return null;
	}
	return v;
};
var StringBuf = function() {
	this.b = "";
};
StringBuf.__name__ = true;
var StringTools = function() { };
StringTools.__name__ = true;
StringTools.isSpace = function(s,pos) {
	var c = HxOverrides.cca(s,pos);
	if(!(c > 8 && c < 14)) {
		return c == 32;
	} else {
		return true;
	}
};
StringTools.ltrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,r)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,r,l - r);
	} else {
		return s;
	}
};
StringTools.rtrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,l - r - 1)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,0,l - r);
	} else {
		return s;
	}
};
StringTools.trim = function(s) {
	return StringTools.ltrim(StringTools.rtrim(s));
};
var haxe_StackItem = { __ename__ : true, __constructs__ : ["CFunction","Module","FilePos","Method","LocalFunction"] };
haxe_StackItem.CFunction = ["CFunction",0];
haxe_StackItem.CFunction.__enum__ = haxe_StackItem;
haxe_StackItem.Module = function(m) { var $x = ["Module",1,m]; $x.__enum__ = haxe_StackItem; return $x; };
haxe_StackItem.FilePos = function(s,file,line) { var $x = ["FilePos",2,s,file,line]; $x.__enum__ = haxe_StackItem; return $x; };
haxe_StackItem.Method = function(classname,method) { var $x = ["Method",3,classname,method]; $x.__enum__ = haxe_StackItem; return $x; };
haxe_StackItem.LocalFunction = function(v) { var $x = ["LocalFunction",4,v]; $x.__enum__ = haxe_StackItem; return $x; };
var haxe_CallStack = function() { };
haxe_CallStack.__name__ = true;
haxe_CallStack.getStack = function(e) {
	if(e == null) {
		return [];
	}
	var oldValue = Error.prepareStackTrace;
	Error.prepareStackTrace = function(error,callsites) {
		var stack = [];
		var _g = 0;
		while(_g < callsites.length) {
			var site = callsites[_g];
			++_g;
			if(haxe_CallStack.wrapCallSite != null) {
				site = haxe_CallStack.wrapCallSite(site);
			}
			var method = null;
			var fullName = site.getFunctionName();
			if(fullName != null) {
				var idx = fullName.lastIndexOf(".");
				if(idx >= 0) {
					var className = HxOverrides.substr(fullName,0,idx);
					var methodName = HxOverrides.substr(fullName,idx + 1,null);
					method = haxe_StackItem.Method(className,methodName);
				}
			}
			stack.push(haxe_StackItem.FilePos(method,site.getFileName(),site.getLineNumber()));
		}
		return stack;
	};
	var a = haxe_CallStack.makeStack(e.stack);
	Error.prepareStackTrace = oldValue;
	return a;
};
haxe_CallStack.callStack = function() {
	try {
		throw new Error();
	} catch( e ) {
		if (e instanceof js__$Boot_HaxeError) e = e.val;
		var a = haxe_CallStack.getStack(e);
		a.shift();
		return a;
	}
};
haxe_CallStack.toString = function(stack) {
	var b = new StringBuf();
	var _g = 0;
	while(_g < stack.length) {
		var s = stack[_g];
		++_g;
		b.b += "\nCalled from ";
		haxe_CallStack.itemToString(b,s);
	}
	return b.b;
};
haxe_CallStack.itemToString = function(b,s) {
	switch(s[1]) {
	case 0:
		b.b += "a C function";
		break;
	case 1:
		var m = s[2];
		b.b += "module ";
		b.b += m == null ? "null" : "" + m;
		break;
	case 2:
		var line = s[4];
		var file = s[3];
		var s1 = s[2];
		if(s1 != null) {
			haxe_CallStack.itemToString(b,s1);
			b.b += " (";
		}
		b.b += file == null ? "null" : "" + file;
		b.b += " line ";
		b.b += line == null ? "null" : "" + line;
		if(s1 != null) {
			b.b += ")";
		}
		break;
	case 3:
		var meth = s[3];
		var cname = s[2];
		b.b += cname == null ? "null" : "" + cname;
		b.b += ".";
		b.b += meth == null ? "null" : "" + meth;
		break;
	case 4:
		var n = s[2];
		b.b += "local function #";
		b.b += n == null ? "null" : "" + n;
		break;
	}
};
haxe_CallStack.makeStack = function(s) {
	if(s == null) {
		return [];
	} else if(typeof(s) == "string") {
		var stack = s.split("\n");
		if(stack[0] == "Error") {
			stack.shift();
		}
		var m = [];
		var rie10 = new EReg("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$","");
		var _g = 0;
		while(_g < stack.length) {
			var line = stack[_g];
			++_g;
			if(rie10.match(line)) {
				var path = rie10.matched(1).split(".");
				var meth = path.pop();
				var file = rie10.matched(2);
				var line1 = Std.parseInt(rie10.matched(3));
				m.push(haxe_StackItem.FilePos(meth == "Anonymous function" ? haxe_StackItem.LocalFunction() : meth == "Global code" ? null : haxe_StackItem.Method(path.join("."),meth),file,line1));
			} else {
				m.push(haxe_StackItem.Module(StringTools.trim(line)));
			}
		}
		return m;
	} else {
		return s;
	}
};
var haxe_IMap = function() { };
haxe_IMap.__name__ = true;
var haxe_ds_StringMap = function() { };
haxe_ds_StringMap.__name__ = true;
haxe_ds_StringMap.__interfaces__ = [haxe_IMap];
var haxe_remoting_JsonRpcConstants = function() { };
haxe_remoting_JsonRpcConstants.__name__ = true;
var hxassert_Assert = function() { };
hxassert_Assert.__name__ = true;
hxassert_Assert.on = function(handler) {
	hxassert_Assert._handlers.push(handler);
	return function() {
		HxOverrides.remove(hxassert_Assert._handlers,handler);
	};
};
hxassert_Assert.fail = function(reason,position) {
	if(reason == null) {
		reason = "Assert.fail";
	}
	hxassert_Assert.throwError(new hxassert_AssertionFailureError([reason],position));
};
hxassert_Assert.throwError = function(error) {
	var _g = 0;
	var _g1 = hxassert_Assert._handlers;
	while(_g < _g1.length) {
		var handler = _g1[_g];
		++_g;
		handler(error);
	}
	if(!error.recovered) {
		throw new js__$Boot_HaxeError(error);
	}
};
hxassert_Assert.throwAssertionFailureError = function(messages,position) {
	hxassert_Assert.throwError(new hxassert_AssertionFailureError(messages,position));
};
var hxassert_AssertionFailureError = function(messages,infos) {
	this.recovered = false;
	this._messages = messages;
	this.position = infos;
	this.callstack = haxe_CallStack.callStack();
};
hxassert_AssertionFailureError.__name__ = true;
hxassert_AssertionFailureError.prototype = {
	toString: function() {
		return this._messages.join("\n");
	}
	,getCallStackText: function() {
		if(this.callstack != null) {
			return haxe_CallStack.toString(this.callstack);
		} else {
			return "";
		}
	}
	,recovery: function() {
		this.recovered = true;
	}
};
var js__$Boot_HaxeError = function(val) {
	Error.call(this);
	this.val = val;
	this.message = String(val);
	if(Error.captureStackTrace) {
		Error.captureStackTrace(this,js__$Boot_HaxeError);
	}
};
js__$Boot_HaxeError.__name__ = true;
js__$Boot_HaxeError.wrap = function(val) {
	if((val instanceof Error)) {
		return val;
	} else {
		return new js__$Boot_HaxeError(val);
	}
};
js__$Boot_HaxeError.__super__ = Error;
js__$Boot_HaxeError.prototype = $extend(Error.prototype,{
});
var js_Boot = function() { };
js_Boot.__name__ = true;
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o instanceof Array) {
			if(o.__enum__) {
				if(o.length == 2) {
					return o[0];
				}
				var str = o[0] + "(";
				s += "\t";
				var _g1 = 2;
				var _g = o.length;
				while(_g1 < _g) {
					var i = _g1++;
					if(i != 2) {
						str += "," + js_Boot.__string_rec(o[i],s);
					} else {
						str += js_Boot.__string_rec(o[i],s);
					}
				}
				return str + ")";
			}
			var l = o.length;
			var i1;
			var str1 = "[";
			s += "\t";
			var _g11 = 0;
			var _g2 = l;
			while(_g11 < _g2) {
				var i2 = _g11++;
				str1 += (i2 > 0 ? "," : "") + js_Boot.__string_rec(o[i2],s);
			}
			str1 += "]";
			return str1;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( e ) {
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var k = null;
		var str2 = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		for( var k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str2.length != 2) {
			str2 += ", \n";
		}
		str2 += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str2 += "\n" + s + "}";
		return str2;
	case "string":
		return o;
	default:
		return String(o);
	}
};
var js_metapage_v1_client_EventEmitter = function() {
	this._events = { };
};
js_metapage_v1_client_EventEmitter.__name__ = true;
js_metapage_v1_client_EventEmitter.prototype = {
	on: function(event,listener) {
		return this.addEventListener(event,listener);
	}
	,addEventListener: function(event,listener) {
		if(!Object.prototype.hasOwnProperty.call(this._events,event)) {
			this._events[event] = [];
		}
		this._events[event].push(listener);
		var f = $bind(this,this.removeListener);
		var a1 = event;
		var a2 = listener;
		return function() {
			f(a1,a2);
		};
	}
	,once: function(event,listener) {
		var _gthis = this;
		var g = function() {
			var args = arguments;
			_gthis.removeListener(event,g);
			listener.apply(null, args);
		};
		return this.addEventListener(event,g);
	}
	,removeListener: function(event,listener) {
		if(event in this._events) {
			var arr = this._events[event];
			HxOverrides.remove(arr,listener);
		}
	}
	,emit: function(event,val1,val2,val3,val4) {
		var args = [].slice.call(arguments, 1);
		if(Object.prototype.hasOwnProperty.call(this._events,event)) {
			var listeners = this._events[event].slice();
			var _g = 0;
			while(_g < listeners.length) {
				var listener = listeners[_g];
				++_g;
				listener.apply(null, args);
			}
		}
	}
	,dispose: function() {
		this._events = { };
	}
};
var js_metapage_v1_client_Metaframe = $hx_exports["Metaframe"] = function(opt) {
	this._debug = false;
	this._color = "";
	this._outputPipeValues = { };
	this._inputPipeValues = { };
	var _gthis = this;
	js_metapage_v1_client_EventEmitter.call(this);
	this._debug = opt != null && opt.debug == true;
	this._isIframe = js_metapage_v1_client_Metaframe.isIframe();
	var $window = window;
	if(!this._isIframe) {
		this.ready = new Promise(function(resolve,reject) {
		});
		this.log("Not an iframe, metaframe code disabled",null,null,{ fileName : "Metaframe.hx", lineNumber : 42, className : "js.metapage.v1.client.Metaframe", methodName : "new"});
		return;
	}
	$window.addEventListener("message",$bind(this,this.onWindowMessage));
	this.ready = new Promise(function(resolve1,reject1) {
		_gthis.once("SetupIframeServerResponse",function(params) {
			_gthis.debug("SetupIframeServerResponse params=" + Std.string(params),{ fileName : "Metaframe.hx", lineNumber : 51, className : "js.metapage.v1.client.Metaframe", methodName : "new"});
			if(_gthis._iframeId == null) {
				_gthis._iframeId = params.iframeId;
				_gthis._parentId = params.parentId;
				var str = _gthis._iframeId;
				var hash = 0;
				var _g1 = 0;
				var _g = str.length;
				while(_g1 < _g) {
					var i = _g1++;
					hash = HxOverrides.cca(str,i) + ((hash << 5) - hash);
				}
				var c = (hash & 16777215).toString(16).toUpperCase();
				var tmp = "00000".substring(0,6 - c.length);
				_gthis._color = tmp + Std.string(c);
				_gthis.debug("initialized parentId=" + _gthis._parentId,null);
				resolve1(true);
				_gthis.sendRpc("SetupIframeServerResponseAck",{ });
				var tmp1 = Reflect.fields(_gthis._outputPipeValues);
				var _e = _gthis._outputPipeValues;
				var tmp2 = tmp1.map(function(key) {
					return _e[key];
				});
				_gthis.sendRpc("OutputsUpdate",tmp2);
			} else {
				_gthis.debug("Got JsonRpcMethods.SetupIframeServerResponse but already resolved",{ fileName : "Metaframe.hx", lineNumber : 71, className : "js.metapage.v1.client.Metaframe", methodName : "new"});
			}
		});
		_gthis.sendRpc("SetupIframeClientRequest",{ });
	});
};
js_metapage_v1_client_Metaframe.__name__ = true;
js_metapage_v1_client_Metaframe.isIframe = function() {
	try {
		return ((window) !== window.top);
	} catch( ignored ) {
		return false;
	}
};
js_metapage_v1_client_Metaframe.__super__ = js_metapage_v1_client_EventEmitter;
js_metapage_v1_client_Metaframe.prototype = $extend(js_metapage_v1_client_EventEmitter.prototype,{
	debug: function(o,pos) {
		if(this._debug) {
			this.log(o,null,null,pos);
		}
	}
	,log: function(o,color,backgroundColor,pos) {
		var s;
		var _g = typeof(o);
		switch(_g) {
		case "number":
			s = Std.string(o) + "";
			break;
		case "string":
			s = o;
			break;
		default:
			s = JSON.stringify(o);
		}
		if(color != null) {
			color += "";
		} else {
			color = this._color;
		}
		s = (this._iframeId != null ? "Metaframe[" + this._iframeId + "] " : "") + (s == null ? "null" : "" + s);
		var color1 = color;
		if(color1 != null) {
			color1 = color1;
		} else {
			color1 = "000";
		}
		if(color1 != null && StringTools.trim(color1) == "") {
			color1 = null;
		}
		var s1;
		var _g1 = typeof(s);
		switch(_g1) {
		case "number":
			s1 = (s == null ? "null" : "" + s) + "";
			break;
		case "string":
			s1 = s;
			break;
		default:
			s1 = JSON.stringify(s);
		}
		var posString = pos == null ? "" : "" + pos.fileName + ":" + pos.lineNumber + " ";
		s1 = posString + s1;
		if(color1 != null && StringTools.trim(color1) != "") {
			var cssString = "color: #" + color1;
			if(backgroundColor != null) {
				cssString = "" + cssString + "; background: #" + backgroundColor;
			}
			s1 = "%c" + s1;
			window.console.log(s1,cssString);
		} else {
			window.console.log(s1);
		}
	}
	,warn: function(o,pos) {
		if(!this._debug) {
			return;
		} else {
			this.log(o,"000",this._color,pos);
		}
	}
	,error: function(err,pos) {
		this.log(err,this._color,"f00",pos);
	}
	,dispose: function() {
		js_metapage_v1_client_EventEmitter.prototype.dispose.call(this);
		window.removeEventListener("message",$bind(this,this.onWindowMessage));
		this._inputPipeValues = null;
		this._outputPipeValues = null;
	}
	,addEventListener: function(event,listener) {
		var _gthis = this;
		var disposer = js_metapage_v1_client_EventEmitter.prototype.addEventListener.call(this,event,listener);
		if(event == "input") {
			window.setTimeout(function() {
				for (key in _gthis._inputPipeValues) { listener.apply(null, key, _gthis._inputPipeValues[key]); }
			},0);
		} else if(event == "output") {
			window.setTimeout(function() {
				for (key in _gthis._outputPipeValues) { listener.apply(null, key, _gthis._outputPipeValues[key]); }
			},0);
		}
		return disposer;
	}
	,onInput: function(pipe,listener) {
		return this.addEventListener("input",function(pipeId,value) {
			if(pipe == pipeId) {
				listener(value);
			}
		});
	}
	,onInputs: function(listener) {
		return this.addEventListener("inputs",listener);
	}
	,onOutput: function(pipe,listener) {
		return this.addEventListener("output",function(pipeId,value) {
			if(pipe == pipeId) {
				listener(value);
			}
		});
	}
	,getInput: function(pipeId) {
		return this._inputPipeValues[pipeId];
	}
	,setInput: function(inputBlob) {
		var pipeId = inputBlob.name;
		this._inputPipeValues[pipeId] = inputBlob;
		this.sendRpc("InputUpdate",inputBlob);
		this.emit("input",pipeId,inputBlob);
		var tmp = Reflect.fields(this._inputPipeValues);
		var _e = this._inputPipeValues;
		this.emit("inputs",tmp.map(function(key) {
			return _e[key];
		}));
	}
	,setInputs: function(inputs) {
		var _g = 0;
		while(_g < inputs.length) {
			var input = inputs[_g];
			++_g;
			this._inputPipeValues[input.name] = input;
		}
		var tmp = Reflect.fields(this._inputPipeValues);
		var _e = this._inputPipeValues;
		this.emit("inputs",tmp.map(function(key) {
			return _e[key];
		}));
		var _g1 = 0;
		while(_g1 < inputs.length) {
			var input1 = inputs[_g1];
			++_g1;
			this.emit("input",input1.name,input1);
		}
	}
	,getInputs: function() {
		var inputs = { };
		var _g = 0;
		var _g1 = Reflect.fields(this._inputPipeValues);
		while(_g < _g1.length) {
			var key = _g1[_g];
			++_g;
			inputs[key] = this._inputPipeValues[key];
		}
		return inputs;
	}
	,getOutput: function(pipeId) {
		return this._outputPipeValues[pipeId];
	}
	,setOutput: function(updateBlob) {
		if(false == (updateBlob != null)) {
			hxassert_Assert.throwAssertionFailureError(["Assertion failed: updateBlob != null"],{ fileName : "Metaframe.hx", lineNumber : 209, className : "js.metapage.v1.client.Metaframe", methodName : "setOutput"});
		}
		if(false == (updateBlob.name != null)) {
			hxassert_Assert.throwAssertionFailureError(["Assertion failed: updateBlob.name != null"],{ fileName : "Metaframe.hx", lineNumber : 210, className : "js.metapage.v1.client.Metaframe", methodName : "setOutput"});
		}
		this._outputPipeValues[updateBlob.name] = updateBlob;
		this.sendRpc("OutputUpdate",updateBlob);
		this.emit("output",updateBlob.name,updateBlob);
	}
	,setOutputs: function(outputs,clearPrevious) {
		if(clearPrevious == null) {
			clearPrevious = false;
		}
		var previousOutputKeys = Reflect.fields(this._outputPipeValues);
		var _g = 0;
		while(_g < outputs.length) {
			var output = outputs[_g];
			++_g;
			this._outputPipeValues[output.name] = output;
			HxOverrides.remove(previousOutputKeys,output.name);
		}
		if(clearPrevious) {
			var _g1 = 0;
			while(_g1 < previousOutputKeys.length) {
				var key = previousOutputKeys[_g1];
				++_g1;
				Reflect.deleteField(this._outputPipeValues,key);
			}
		}
		this.sendRpc("OutputsUpdate",outputs);
		var _g2 = 0;
		while(_g2 < outputs.length) {
			var output1 = outputs[_g2];
			++_g2;
			this.emit("output",output1.name,output1);
		}
	}
	,getOutputs: function() {
		var outputs = { };
		var _g = 0;
		var _g1 = Reflect.fields(this._outputPipeValues);
		while(_g < _g1.length) {
			var key = _g1[_g];
			++_g;
			outputs[key] = this._outputPipeValues[key];
		}
		return outputs;
	}
	,sendRpc: function(method,params) {
		if(this._isIframe) {
			var message = { origin : null, jsonrpc : "2.0", method : method, params : params, iframeId : this._iframeId, parentId : this._parentId};
			this.debug("Sending message=" + HxOverrides.substr(JSON.stringify(message),0,200),{ fileName : "Metaframe.hx", lineNumber : 257, className : "js.metapage.v1.client.Metaframe", methodName : "sendRpc"});
			window.parent.postMessage(message,"*");
		} else {
			this.error("Cannot send JSON-RPC window message: there is no window.parent which means we are not an iframe",{ fileName : "Metaframe.hx", lineNumber : 260, className : "js.metapage.v1.client.Metaframe", methodName : "sendRpc"});
		}
	}
	,onWindowMessage: function(e) {
		if(typeof e.data === "object") {
			var jsonrpc = e.data;
			if(jsonrpc.jsonrpc == "2.0") {
				var method = jsonrpc.method;
				if(!(method == "SetupIframeServerResponse" || jsonrpc.parentId == this._parentId && jsonrpc.iframeId == this._iframeId)) {
					this.error("Received message but jsonrpc.parentId=" + jsonrpc.parentId + " _parentId=" + this._parentId + " jsonrpc.iframeId=" + jsonrpc.iframeId + " _iframeId=" + this._iframeId,{ fileName : "Metaframe.hx", lineNumber : 273, className : "js.metapage.v1.client.Metaframe", methodName : "onWindowMessage"});
					return;
				}
				switch(method) {
				case "InputUpdate":
					this.internalOnInput(jsonrpc.params);
					break;
				case "InputsUpdate":
					this.setInputs(jsonrpc.params.inputs);
					break;
				case "SetupIframeServerResponse":
					break;
				}
				this.emit(jsonrpc.method,jsonrpc.params);
				this.emit("message",jsonrpc);
			} else {
				this.log("!Bad JsonRPC version=" + jsonrpc.jsonrpc,null,null,{ fileName : "Metaframe.hx", lineNumber : 287, className : "js.metapage.v1.client.Metaframe", methodName : "onWindowMessage"});
			}
		} else {
			this.log("!message is not an object",null,null,{ fileName : "Metaframe.hx", lineNumber : 290, className : "js.metapage.v1.client.Metaframe", methodName : "onWindowMessage"});
		}
	}
	,internalOnInput: function(input) {
		this.debug("InputUpdate from registed RPC pipeId=" + input.name + " value=" + HxOverrides.substr(JSON.stringify(input.value),0,200),{ fileName : "Metaframe.hx", lineNumber : 296, className : "js.metapage.v1.client.Metaframe", methodName : "internalOnInput"});
		var pipeId = input != null ? input.name : null;
		var pipeValue = input != null ? input.value : null;
		if(pipeId == null) {
			this.error("Missing \"name\" value in the params object to identify the pipe. input=" + Std.string(input),{ fileName : "Metaframe.hx", lineNumber : 300, className : "js.metapage.v1.client.Metaframe", methodName : "internalOnInput"});
		} else {
			this.debug("Setting input value from InputPipeUpdate pipeId=" + pipeId,{ fileName : "Metaframe.hx", lineNumber : 302, className : "js.metapage.v1.client.Metaframe", methodName : "internalOnInput"});
			this.setInput(input);
		}
	}
	,internalOnInputs: function(inputs) {
		this.debug("InputUpdates from registed RPC inputs=" + HxOverrides.substr(JSON.stringify(inputs),0,200),{ fileName : "Metaframe.hx", lineNumber : 309, className : "js.metapage.v1.client.Metaframe", methodName : "internalOnInputs"});
	}
	,sendDimensions: function(dimensions) {
		var $window = window;
		if(dimensions == null) {
			var height = $window.document.documentElement.scrollHeight != null ? $window.document.documentElement.scrollHeight : $window.document.body.scrollHeight;
			dimensions = { width : null, height : height, "window.innerWidth" : $window.innerWidth, "window.innerHeight" : $window.innerHeight, "window.document.body.scrollHeight" : $window.document.body.scrollHeight, "window.document.documentElement.scrollHeight" : $window.document.documentElement.scrollHeight};
		} else if(typeof(dimensions) != "object") {
			throw new js__$Boot_HaxeError({ dimensions : dimensions, error : "sendDimensions(..) expecting {width:Float, height:Float}"});
		} else if(!(Object.prototype.hasOwnProperty.call(dimensions,"width") && Object.prototype.hasOwnProperty.call(dimensions,"height"))) {
			throw new js__$Boot_HaxeError({ dimensions : dimensions, error : "sendDimensions(..) missing either width or height field, expecting: {width:Float, height:Float}"});
		}
		this.sendRpc("Dimensions",dimensions);
	}
});
var js_metapage_v1_client_MetapageTools = function() { };
js_metapage_v1_client_MetapageTools.__name__ = true;
js_metapage_v1_client_MetapageTools.toDatablob = function(blob) {
	var data = { value : blob.value};
	if(blob.type != null) {
		data.type = blob.type;
	}
	if(blob.source != null) {
		data.source = blob.source;
	}
	if(blob.encoding != null) {
		data.encoding = blob.encoding;
	}
	return data;
};
js_metapage_v1_client_MetapageTools.log = function(o,color,backgroundColor,pos) {
	if(color != null) {
		color = color;
	} else {
		color = "000";
	}
	if(color != null && StringTools.trim(color) == "") {
		color = null;
	}
	var s;
	var _g = typeof(o);
	switch(_g) {
	case "number":
		s = Std.string(o) + "";
		break;
	case "string":
		s = o;
		break;
	default:
		s = JSON.stringify(o);
	}
	var posString = pos == null ? "" : "" + pos.fileName + ":" + pos.lineNumber + " ";
	s = posString + s;
	if(color != null && StringTools.trim(color) != "") {
		var cssString = "color: #" + color;
		if(backgroundColor != null) {
			cssString = "" + cssString + "; background: #" + backgroundColor;
		}
		s = "%c" + s;
		window.console.log(s,cssString);
	} else {
		window.console.log(s);
	}
};
js_metapage_v1_client_MetapageTools.stringToRgb = function(str) {
	var hash = 0;
	var _g1 = 0;
	var _g = str.length;
	while(_g1 < _g) {
		var i = _g1++;
		hash = HxOverrides.cca(str,i) + ((hash << 5) - hash);
	}
	var c = (hash & 16777215).toString(16).toUpperCase();
	return "00000".substring(0,6 - c.length) + Std.string(c);
};
js_metapage_v1_client_MetapageTools.hashCode = function(str) {
	var hash = 0;
	var _g1 = 0;
	var _g = str.length;
	while(_g1 < _g) {
		var i = _g1++;
		hash = HxOverrides.cca(str,i) + ((hash << 5) - hash);
	}
	return hash;
};
js_metapage_v1_client_MetapageTools.intToRGB = function(i) {
	var c = (i & 16777215).toString(16).toUpperCase();
	return "00000".substring(0,6 - c.length) + Std.string(c);
};
var util__$TypedDynamicAccess_TypedDynamicAccess_$Impl_$ = {};
util__$TypedDynamicAccess_TypedDynamicAccess_$Impl_$.__name__ = true;
util__$TypedDynamicAccess_TypedDynamicAccess_$Impl_$._new = function() {
	var this1 = { };
	return this1;
};
util__$TypedDynamicAccess_TypedDynamicAccess_$Impl_$.get = function(this1,key) {
	return this1[key];
};
util__$TypedDynamicAccess_TypedDynamicAccess_$Impl_$.set = function(this1,key,value) {
	return this1[key] = value;
};
util__$TypedDynamicAccess_TypedDynamicAccess_$Impl_$.exists = function(this1,key) {
	return Object.prototype.hasOwnProperty.call(this1,key);
};
util__$TypedDynamicAccess_TypedDynamicAccess_$Impl_$.remove = function(this1,key) {
	return Reflect.deleteField(this1,key);
};
util__$TypedDynamicAccess_TypedDynamicAccess_$Impl_$.keys = function(this1) {
	return Reflect.fields(this1);
};
var $_, $fid = 0;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $fid++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = function(){ return f.method.apply(f.scope, arguments); }; f.scope = o; f.method = m; o.hx__closures__[m.__id__] = f; } return f; }
String.__name__ = true;
Array.__name__ = true;
var __map_reserved = {};
haxe_remoting_JsonRpcConstants.JSONRPC_VERSION_2 = "2.0";
haxe_remoting_JsonRpcConstants.MULTIPART_JSONRPC_KEY = "jsonrpc";
haxe_remoting_JsonRpcConstants.JSONRPC_NULL_ID = "_";
hxassert_Assert._handlers = [];
js_metapage_v1_client_Metaframe.METAPAGE_VERSION = "alpha";
})(typeof exports != "undefined" ? exports : typeof window != "undefined" ? window : typeof self != "undefined" ? self : this);
